<!DOCTYPE html>
<html lang="zh-CN" data-theme="dark">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="墨记 - 优雅的日志管理系统">
  <title>墨记 · 优雅的日志管理系统</title>

  <!-- Preload critical resources -->
  <link rel="preload" href="https://cdn.quilljs.com/1.3.6/quill.snow.css" as="style">
  <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style">
  <link rel="preload" href="css/style.css" as="style">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <!-- CSS -->
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <link href="css/style.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">

  <!-- Favicon -->
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
</head>

<body>
  <div class="app-container">
    <header class="app-header">
      <div class="header-content">
        <h1><i class="fas fa-feather-alt" aria-hidden="true"></i> 墨记</h1>
        <p class="subtitle">记录生活点滴，珍藏美好时光</p>
      </div>
      <div class="user-actions">
        <button id="themeToggle" class="btn icon" aria-label="切换主题">
          <i class="fas fa-moon"></i>
        </button>
        <button id="statsButton" class="btn icon" aria-label="查看统计">
          <i class="fas fa-chart-pie"></i>
        </button>
        <div class="user-avatar">
          <img src="https://ui-avatars.com/api/?name=墨记&background=7F5AF0&color=fff" alt="用户头像" width="48" height="48">
        </div>
      </div>
    </header>

    <main class="app-main">
      <section class="editor-section card">
        <div class="editor-header">
          <h2><i class="fas fa-pen-fancy"></i> 写点什么</h2>
          <div class="editor-tools">
            <button id="editorFullscreen" class="btn icon" aria-label="全屏编辑">
              <i class="fas fa-expand-alt"></i>
            </button>
            <button id="quickTemplate" class="btn icon" aria-label="快速模板">
              <i class="fas fa-magic"></i>
            </button>
          </div>
        </div>
        <div id="editor-container" aria-label="日志编辑器"></div>

        <div class="editor-footer">
          <div class="word-count">
            <i class="fas fa-font"></i> <span id="wordCount">0</span> 字
          </div>
          <div class="mood-selector">
            <span class="mood-label">心情:</span>
            <div class="mood-options">
              <button class="mood-btn" data-mood="happy"><i class="fas fa-smile"></i></button>
              <button class="mood-btn" data-mood="sad"><i class="fas fa-frown"></i></button>
              <button class="mood-btn" data-mood="meh"><i class="fas fa-meh"></i></button>
              <button class="mood-btn" data-mood="angry"><i class="fas fa-angry"></i></button>
              <button class="mood-btn" data-mood="excited"><i class="fas fa-grin-stars"></i></button>
            </div>
          </div>
          <div class="editor-actions">
            <button id="saveLog" class="btn primary">
              <i class="fas fa-save" aria-hidden="true"></i> 保存日志
            </button>
          </div>
        </div>
      </section>

      <section class="image-upload-section card">
        <div class="section-header">
          <h2><i class="fas fa-images" aria-hidden="true"></i> 图片上传</h2>
          <div class="upload-tools">
            <button id="pasteFromClipboard" class="btn outline" aria-label="从剪贴板粘贴">
              <i class="fas fa-clipboard"></i> 从剪贴板粘贴
            </button>
          </div>
        </div>
        <div class="upload-area" id="dropZone" role="region" aria-labelledby="dropZoneLabel">
          <div class="upload-prompt">
            <i class="fas fa-cloud-upload-alt" aria-hidden="true"></i>
            <p id="dropZoneLabel">拖放图片到这里或点击选择</p>
          </div>
          <input type="file" id="image-upload" accept="image/*" multiple class="image-input"
            aria-labelledby="dropZoneLabel" />
        </div>
        <div id="image-preview-container" class="image-grid"></div>
        <div class="upload-controls">
          <button id="arrangeImages" class="btn outline" aria-label="排序图片">
            <i class="fas fa-sort"></i> 排序
          </button>
          <button id="clear-images" class="btn outline">
            <i class="fas fa-trash-alt" aria-hidden="true"></i> 清空图片
          </button>
        </div>
      </section>

      <section class="logs-section">
        <div class="section-header">
          <h2><i class="fas fa-history" aria-hidden="true"></i> 历史日志</h2>
          <div class="section-actions">
            <button id="viewMode" class="btn icon" aria-label="切换视图模式">
              <i class="fas fa-th-list"></i>
            </button>
            <button id="exportLogs" class="btn outline">
              <i class="fas fa-download" aria-hidden="true"></i> 导出
            </button>
            <button id="importLogs" class="btn outline">
              <i class="fas fa-upload" aria-hidden="true"></i> 导入
            </button>
            <button id="clearAllLogs" class="btn danger">
              <i class="fas fa-broom" aria-hidden="true"></i> 清空
            </button>
          </div>
        </div>

        <div class="log-filters">
          <div class="search-box">
            <i class="fas fa-search" aria-hidden="true"></i>
            <input type="text" id="searchInput" placeholder="搜索日志..." aria-label="搜索日志">
          </div>
          <div class="filter-controls">
            <div class="date-filter">
              <i class="fas fa-calendar-alt" aria-hidden="true"></i>
              <input type="date" id="dateFilter" aria-label="按日期筛选">
            </div>
            <button id="clearFilters" class="btn outline btn-sm">
              <i class="fas fa-times"></i> 清除筛选
            </button>
          </div>
        </div>

        <div class="card">
          <div id="logList" class="log-list"></div>
          <div id="logPagination" class="pagination">
            <button id="prevPage" class="btn outline btn-sm"><i class="fas fa-chevron-left"></i> 上一页</button>
            <span id="pageIndicator">第 <span id="currentPage">1</span>/<span id="totalPages">1</span> 页</span>
            <button id="nextPage" class="btn outline btn-sm">下一页 <i class="fas fa-chevron-right"></i></button>
          </div>
        </div>
      </section>
    </main>

    <footer class="app-footer">
      <p>© 2023 墨记日志系统 · <span id="storageInfo">已使用 0% 存储空间</span></p>
      <div class="footer-links">
        <a href="#" id="showShortcuts" aria-label="键盘快捷键"><i class="fas fa-keyboard" aria-hidden="true"></i> 快捷键</a>
        <a href="#" id="showSettings" aria-label="设置"><i class="fas fa-cog" aria-hidden="true"></i> 设置</a>
      </div>
    </footer>
  </div>

  <!-- Templates Modal -->
  <div id="templatesModal" class="modal" hidden>
    <div class="modal-content card">
      <h3><i class="fas fa-magic"></i> 快速模板</h3>
      <div class="template-list">
        <button class="template-item" data-template="daily">
          <i class="fas fa-calendar-day"></i>
          <span>每日记录</span>
        </button>
        <button class="template-item" data-template="gratitude">
          <i class="fas fa-pray"></i>
          <span>感恩记录</span>
        </button>
        <button class="template-item" data-template="idea">
          <i class="fas fa-lightbulb"></i>
          <span>灵感记录</span>
        </button>
        <button class="template-item" data-template="travel">
          <i class="fas fa-plane"></i>
          <span>旅行记录</span>
        </button>
      </div>
      <div class="modal-actions">
        <button id="templateClose" class="btn outline">关闭</button>
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div id="settingsModal" class="modal" hidden>
    <div class="modal-content card">
      <h3><i class="fas fa-cog"></i> 设置</h3>
      <div class="settings-form">
        <div class="setting-item">
          <label>
            <span>界面主题</span>
            <select id="themeSetting">
              <option value="dark">暗色</option>
              <option value="light">亮色</option>
              <option value="auto">跟随系统</option>
            </select>
          </label>
        </div>
        <div class="setting-item">
          <label>
            <span>字体大小</span>
            <select id="fontSizeSetting">
              <option value="small">小</option>
              <option value="medium" selected>中</option>
              <option value="large">大</option>
            </select>
          </label>
        </div>
        <div class="setting-item">
          <label>
            <input type="checkbox" id="autoSaveSetting">
            <span>自动保存草稿</span>
          </label>
        </div>
      </div>
      <div class="modal-actions">
        <button id="settingsSave" class="btn primary">保存设置</button>
        <button id="settingsCancel" class="btn outline">取消</button>
      </div>
    </div>
  </div>

  <!-- Stats Modal -->
  <div id="statsModal" class="modal" hidden>
    <div class="modal-content card">
      <h3><i class="fas fa-chart-pie"></i> 日志统计</h3>
      <div class="stats-container">
        <div class="stat-item">
          <div class="stat-value" id="totalLogs">0</div>
          <div class="stat-label">总日志数</div>
        </div>
        <div class="stat-item">
          <div class="stat-value" id="totalWords">0</div>
          <div class="stat-label">总字数</div>
        </div>
        <div class="stat-item">
          <div class="stat-value" id="totalImages">0</div>
          <div class="stat-label">总图片数</div>
        </div>
      </div>
      <div id="activityChart" class="activity-chart">
        <!-- 活跃图表将通过JS渲染 -->
      </div>
      <div class="modal-actions">
        <button id="statsClose" class="btn outline">关闭</button>
      </div>
    </div>
  </div>

  <!-- Confirmation Modal -->
  <div id="confirmModal" class="modal" hidden>
    <div class="modal-content card">
      <h3 id="confirmModalTitle">确认操作</h3>
      <p id="confirmModalMessage">您确定要执行此操作吗？</p>
      <div class="modal-actions">
        <button id="confirmCancel" class="btn outline">取消</button>
        <button id="confirmAction" class="btn danger">确认</button>
      </div>
    </div>
  </div>

  <!-- Shortcuts Modal -->
  <div id="shortcutsModal" class="modal" hidden>
    <div class="modal-content card">
      <h3><i class="fas fa-keyboard"></i> 键盘快捷键</h3>
      <div class="shortcuts-list">
        <div class="shortcut-item">
          <span class="key-combo">Ctrl + S</span>
          <span class="key-desc">保存日志</span>
        </div>
        <div class="shortcut-item">
          <span class="key-combo">Ctrl + N</span>
          <span class="key-desc">新建日志</span>
        </div>
        <div class="shortcut-item">
          <span class="key-combo">Ctrl + F</span>
          <span class="key-desc">搜索日志</span>
        </div>
        <div class="shortcut-item">
          <span class="key-combo">Ctrl + I</span>
          <span class="key-desc">插入图片</span>
        </div>
        <div class="shortcut-item">
          <span class="key-combo">F11</span>
          <span class="key-desc">全屏编辑</span>
        </div>
      </div>
      <div class="modal-actions">
        <button id="shortcutsClose" class="btn outline">关闭</button>
      </div>
    </div>
  </div>

  <!-- Toast Container -->
  <div class="toast-container" id="toastContainer" aria-live="polite"></div>

  <!-- JavaScript -->
  <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
  <script type="module" src="js/app.js"></script>
</body>

</html>